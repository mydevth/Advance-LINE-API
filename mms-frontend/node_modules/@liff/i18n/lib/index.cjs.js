"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e=require("tslib"),t=require("@liff/consts"),n=require("@liff/util"),i=require("@liff/server-api"),r=navigator.language,s=null;function a(t){return e.__awaiter(this,void 0,void 0,(function(){return e.__generator(this,(function(e){switch(e.label){case 0:return r=t,[4,o()];case 1:return e.sent(),[2]}}))}))}function o(){return e.__awaiter(this,void 0,void 0,(function(){var t,n;return e.__generator(this,(function(e){switch(e.label){case 0:return[4,i.fetch("https://liffsdk.line-scdn.net/xlt/manifest.json",{method:"GET",headers:{Accept:"application/json"}})];case 1:return t=e.sent(),n=""+r,!t.languages[n]&&r.includes("-")&&(n=r.split("-")[0]),t.languages[n]||(n="en"),[4,i.fetch("https://liffsdk.line-scdn.net/xlt/"+t.languages[n],{method:"GET",headers:{Accept:"application/json"}})];case 2:return s=e.sent(),[2]}}))}))}var u=new(function(){function t(){this.name="i18n"}return t.prototype.install=function(e){return e.internalHooks.init.beforeFinished(this.beforeInitFinished.bind(this)),{setLang:a}},t.prototype.beforeInitFinished=function(){return e.__awaiter(this,void 0,void 0,(function(){return e.__generator(this,(function(e){switch(e.label){case 0:return[4,o()];case 1:return e.sent(),[2]}}))}))},t}());exports.module=u,exports.t=function(e){if(null===s)throw n.createLiffError(t.INIT_FAILED,"please call xlt after liff.init");return s[e]};
