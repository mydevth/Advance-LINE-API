"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e=require("tslib"),i=require("@liff/consts"),n=require("@liff/util"),r=require("@liff/is-in-client"),t=require("@liff/get-os"),o=require("@liff/get-line-version"),f=require("@liff/native-bridge"),l=function(e,i){return e?"&"+e.split("&").filter((function(e){return-1===e.indexOf("is_liff_external_open_window")})).join("&").concat(i?"#"+i:""):i?"#"+i:""};exports.openWindow=function(u){if(!function(i){if(!i||"object"!=typeof i)return!1;var n=i,r=n.url,t=n.external,o=e.__read([typeof r,typeof t],2),f=o[0],l=o[1];return"string"===f&&""!==r&&("undefined"===l||"boolean"===l)}(u))throw n.createLiffError(i.INVALID_ARGUMENT,"Invalid parameters for liff.openWindow()");var d=o.getLineVersion();if(r.isInClient())if(null!==d&&"ios"===t.getOS()&&n.compareVersion(d,"9.19")>=0||!window._liff.postMessage){var s=u.url,a=u.external,_=void 0!==a&&a;window.open(function(i,n){var r,t,o,f,u,d,s,a,_,p;return function(e){return-1!==e.indexOf("#")&&-1!==e.indexOf("?")&&e.indexOf("#")<e.indexOf("?")}(i)||function(e){return-1===e.indexOf("?")&&-1!==e.indexOf("#")}(i)?(s=(r=e.__read(i.split("#"),2))[0],a=void 0===(t=r[1])?"":t,_=(o=e.__read(a.split("?"),2))[0],p=o[1]):(s=(f=e.__read(i.split("?"),2))[0],a=void 0===(u=f[1])?"":u,p=(d=e.__read(a.split("#"),2))[0],_=d[1]),s+"?is_liff_external_open_window="+!!n+l(p,_)}(s,_))}else f.call("openWindow",u);else window.open(u.url,"_blank")};
