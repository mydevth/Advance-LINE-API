import{__awaiter as t,__generator as n}from"tslib";import{createLiffError as e,qs as i}from"@liff/util";import{FORBIDDEN as o,INVALID_ARGUMENT as r}from"@liff/consts";import{isSubWindow as a}from"@liff/is-sub-window";import{CheckAvailability as s}from"@liff/check-availability";var l=0;function c(t,n){if(!n.isInClient())throw e(o,"addToHomeScreen() can only be called in client");if(a())throw e(o,"The operation is not allowed in the SubWindow");if(!new s(n).invoke("addToHomeScreen"))throw e(o,"No permission for liff.addToHomeScreen()");if(!(t&&t.name&&t.iconUrl&&t.state))throw e(r,"Invalid parameters for liff.addToHomeScreen()");return!0}function f(e){return function(o){return t(this,void 0,void 0,(function(){var t,r,a,s;return n(this,(function(n){return c(o,e),t=o.name,r=o.iconUrl,(a=o.state).startsWith("/")&&(a=a.substring(1)),s={label:t,iconUrl:r,schemePath:"app/"+e.id+"/?liff.state="+encodeURIComponent("/"+a)},e.openWindow({url:"https://line.me/channel/shortcut?"+i.stringify(s),external:!0}),[2,l]}))}))}}function u(e){return function(i){return t(this,void 0,void 0,(function(){var t,o,r,a;return n(this,(function(n){switch(n.label){case 0:return c(i,e),t=i.name,o=i.iconUrl,r=i.lineResourcePath,(a=i.state).startsWith("/")&&(a=a.substring(1)),[4,e._call("addToHomeScreen",{name:t,iconUrl:o,state:a,lineResourcePath:r})];case 1:return[2,n.sent().status]}}))}))}}export{u as android,f as ios};
