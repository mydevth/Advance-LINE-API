"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e=require("tslib"),r=require("@liff/util"),t=require("@liff/consts"),i=require("@liff/is-sub-window"),n=require("@liff/check-availability"),o=0;function a(e,o){if(!o.isInClient())throw r.createLiffError(t.FORBIDDEN,"addToHomeScreen() can only be called in client");if(i.isSubWindow())throw r.createLiffError(t.FORBIDDEN,"The operation is not allowed in the SubWindow");if(!new n.CheckAvailability(o).invoke("addToHomeScreen"))throw r.createLiffError(t.FORBIDDEN,"No permission for liff.addToHomeScreen()");if(!(e&&e.name&&e.iconUrl&&e.state))throw r.createLiffError(t.INVALID_ARGUMENT,"Invalid parameters for liff.addToHomeScreen()");return!0}exports.android=function(r){return function(t){return e.__awaiter(this,void 0,void 0,(function(){var i,n,o,s;return e.__generator(this,(function(e){switch(e.label){case 0:return a(t,r),i=t.name,n=t.iconUrl,o=t.lineResourcePath,(s=t.state).startsWith("/")&&(s=s.substring(1)),[4,r._call("addToHomeScreen",{name:i,iconUrl:n,state:s,lineResourcePath:o})];case 1:return[2,e.sent().status]}}))}))}},exports.ios=function(t){return function(i){return e.__awaiter(this,void 0,void 0,(function(){var n,s,c,l;return e.__generator(this,(function(e){return a(i,t),n=i.name,s=i.iconUrl,(c=i.state).startsWith("/")&&(c=c.substring(1)),l={label:n,iconUrl:s,schemePath:"app/"+t.id+"/?liff.state="+encodeURIComponent("/"+c)},t.openWindow({url:"https://line.me/channel/shortcut?"+r.qs.stringify(l),external:!0}),[2,o]}))}))}};
