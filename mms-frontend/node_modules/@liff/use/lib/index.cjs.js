"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e=require("tslib"),t=require("@liff/logger"),i=function(e,t){this._driver=e,this.liff=t,this.hooks=this._driver.hooks,this.internalHooks=this._driver.internalHooks},n=function(e,t){this._driver=e,this.liff=t,this.hooks=this._driver.hooks},o=function(){function t(){this.modules=new Map,this.hooks={},this.internalHooks={}}return t.prototype.addModule=function(t,i){this.modules.set(t,i),i.hooks&&(this.hooks[t]=Object.entries(i.hooks).reduce((function(t,i){var n,o=e.__read(i,2),r=o[0],s=o[1];return e.__assign(e.__assign({},t),((n={})[r]=s.on.bind(s),n))}),{})),i.internalHooks&&(this.internalHooks[t]=Object.entries(i.internalHooks).reduce((function(t,i){var n,o=e.__read(i,2),r=o[0],s=o[1];return e.__assign(e.__assign({},t),((n={})[r]=s.on.bind(s),n))}),{}))},t.prototype.hasModule=function(e){return this.modules.has(e)},t}(),r=function(){function e(e,t,i){this.driver=e,this.context=t,this.option=i}return e.prototype.install=function(){return this.factory(this.driver,this.context)},Object.defineProperty(e.prototype,"name",{get:function(){return"use"},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"defaultOption",{get:function(){return{namespacePrefix:"$"}},enumerable:!1,configurable:!0}),e.prototype.factory=function(e,i){var n=Object.assign({},this.defaultOption,this.option).namespacePrefix;return function(o,r){if(!o||"function"!=typeof o.install||"string"!=typeof o.name)return t.logger.warn("To install the plugin, you need to define the `name` property and the `install` method."),this;var s=""+n+o.name;if(e.hasModule(s))return this;var u=o.install.call(o,i,r);return this[""+s]?(t.logger.warn("There is a duplicate plugin name. `"+s+"` plugin namespace will be override."),this[""+s]=u):void 0!==u&&(this[""+s]=u),e.addModule(s,o),this}},e}();exports.LiffPluginContextImpl=n,exports.ModuleContextImpl=i,exports.ModuleDriverImpl=o,exports.UseModule=r;
